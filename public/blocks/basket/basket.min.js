function showBasket(){$.ajax({type:"POST",url:"/basket"}).done(function(t){getCountOfProductsInBasket(),$(".offcanvas").html(t),offcanvas.show()})}function addProductToBasket(t){let e=new Object;e.token2=token2,e.productId=t,$.ajax({type:"POST",url:"/basket/add",data:e}).done(function(){showBasket()})}function deleteProductFromBasket(t){let e=new Object;e.token2=token2,e.basketId=t,$.ajax({type:"POST",url:"/basket/delete",data:e}).done(function(){getTotalSumInBasket(),getCountOfProductsInBasket(),$("[data-basket-id="+t+"]").fadeOut()})}function getTotalSumInBasket(){let t=new Object;t.token2=token2,$.ajax({type:"POST",url:"/basket/get-total-sum",data:t}).done(function(t){t>0&&numberAnimation("#basket__total-sum",t)})}function getCountOfProductsInBasket(){let t=new Object;t.token2=token2,$.ajax({type:"POST",url:"/basket/get-count",data:t}).done(function(t){$(".nav__basket>span").text(t),$(".offcanvas-title")&&(t>0?$(".offcanvas-title").html(t+" "+wordByNumber(t,["товар","товара","товаров"])):($(".offcanvas-title").html("Корзина пуста"),$(".basket__footer").fadeOut()))})}function setPriceInBasket(t,e){let a=new Object;a.token2=token2,a.basketId=t,a.newPrice=e,$.ajax({type:"POST",url:"/basket/set-price",data:a}).done(function(){getTotalSumInBasket()})}function setBasketAmount(t,e){let a=new Object;a.token2=token2,a.basketId=t,a.currentAmount=e,$.ajax({type:"POST",url:"/basket/set-amount",data:a}).done(function(a){let n="[data-basket-id="+t+"]";""==a?($(n+" .basket__plus").addClass("btn-round_disable"),$(n+" .basket__amount").html(e-1)):($(n+" .basket__plus").removeClass("btn-round_disable"),$(n+" .basket__amount").html(a)),getTotalSumInBasket(),getCountOfProductsInBasket()})}$(function(){getCountOfProductsInBasket(),$(".basket__add").click(function(){event.preventDefault(),productId=$(this).attr("data-product-id"),$(this).html('<i class="fa-solid fa-check"></i> В корзине'),addProductToBasket(productId)})});