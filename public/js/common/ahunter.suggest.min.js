!function(){function e(e){return(e={Options:e,jZipField:null,Fields:[],FieldsByLevels:{},BuildQueryUpTo:function(e){for(var s="",t=0,o=0;o<this.Fields.length;o++)if(n.IsLessOrEqualLevel(this.Fields[o].MinLevel,e.MinLevel)){var u=this.Fields[o].GetValue();(0<u.length||this.Fields[o]===e)&&(s+=n.GetLevelsSigns(this.Fields[o].Levels),s+="[",s+=n.EscapeQuery(u),s+="]",t+=u.length)}else this.Fields[o].ClearValue();return this.jZipField&&(e=this.jZipField.val(),s+=i.ZipLevel.sign,s=s+"["+n.EscapeQuery(e),s+="]",t+=e.length),0<t?s:""},IsTailField:function(e){return null==n.Find(this.Fields,function(s){return n.IsLessLevel(e.MaxLevel,s.MinLevel)&&""!=s.GetValue()})},RefreshForm:function(e,s){this.ClearAllFields();for(var t=null,i=0;i<s.length;i++)(t=this.FieldsByLevels[s[i].level]).AppendValue(s[i].type+" "+s[i].name);t&&t!=e&&t.SetFocus(!0)},ClearAllFields:function(){for(var e=0;e<this.Fields.length;e++)this.Fields[e].ClearValue()},Init:function(){for(var e=this,s=0;s<this.Options.fields.length;s++)this.Fields.push(function(e,s){var o={Options:n.BuildFieldOptions(s,e.Options,"site/suggest/address"),AddressForm:e,Levels:s.levels,MinLevel:"",MaxLevel:"",EXT:{PrepareQuery:function(e){return e="discrete",this.Options.obsolete_names&&(e+="|obsnames"),this.Options.obsolete_objects&&(e+="|obsobjects"),{query:this.AddressForm.BuildQueryUpTo(this),mode:e,addresslim:this.Options.limit}},IsAllowedToSuggestOnFocus:function(){return this.AddressForm.IsTailField(this)&&this.Options.suggest_on_focus},IsAllowedQuery:function(e,s){var t=!!(e.query&&0<e.query.length);return t&&0==s.length&&(t=this.Options.suggest_on_empty),t},OnChooseSuggestion:function(e){var s=[],s=e.a_machine?n.DecodeMachineAddress(e.a_machine):e.f_machine?n.DecodeMachineAddress(e.f_machine):n.DecodeMachineAddress(e.machine);this.AddressForm.RefreshForm(this,s),this.Options.on_choose&&this.Options.on_choose.call(this.Options.on_choose_context,e),this.Options.on_fetch&&(s=$.extend({query:e.sign},this.AddressForm.Options.api_options),s.output=s.output?s.output+"|json":"json",this.Options.user&&(s.user=this.Options.user),$.ajax({type:"GET",url:this.Options.ahunter_url+"site/fetch/address",data:s,cache:!1,context:this,success:function(s){this.Options.on_fetch.call(this.Options.on_fetch_context,e,s.address)}}))},SuggestionViewInList:function(e){return n.AddressSuggestionViewInList(e)},SuggestionViewInField:function(e){return e.value}},ClearValue:function(){this.ResetField(""),this.ClearSuggestions()},AppendValue:function(e){var s=this.GetValue();s&&(s+=", "),this.ResetField(s+e)},Init:function(){this.MinLevel=i.AddressLevels.Flat.name,this.MaxLevel=i.AddressLevels.Region.name;for(var e=0;e<this.Levels.length;e++)n.IsLessLevel(this.Levels[e],this.MinLevel)&&(this.MinLevel=this.Levels[e]),n.IsLessLevel(this.MaxLevel,this.Levels[e])&&(this.MaxLevel=this.Levels[e]);void 0===s.empty_msg&&this.MinLevel===i.AddressLevels.Flat.name&&(this.Options.empty_msg="")}};o.Init();var u=t(o.Options.id,o.Options.max_height,o.Options.z_index,o.Options.full_url,o.Options.empty_msg,o.Options.append_to,o.Options.on_edit,o.Options.on_edit_context);return n.ExtendSuggester(u,o)}(this,this.Options.fields[s]));for(s=0;s<this.Fields.length;s++)for(Level in i.AddressLevels)n.IsLessOrEqualLevel(this.Fields[s].MinLevel,Level)&&n.IsLessOrEqualLevel(Level,this.Fields[s].MaxLevel)&&(this.FieldsByLevels[Level]=this.Fields[s]);void 0!==this.Options.zip_field&&(s=this.Options.zip_field.id,this.jZipField="string"==typeof s&&"#"!==s[0]&&"."!==s[0]?$("#"+s):$(s),this.jZipField.on("keyup"+i.EventsNamespace,function(){e.ClearAllFields()}),this.jZipField.on("input"+i.EventsNamespace,function(){e.ClearAllFields()}),this.jZipField.on("change"+i.EventsNamespace,function(){e.ClearAllFields()}))},Dispose:function(){for(var e=0;e<this.Fields.length;e++)this.Fields[e].Dispose()}}).Init(),e}function s(e){return(e={Options:e,Fields:[],BuildQueryWithActiveField:function(e){return{active:e.Tag,last_name:this.GetFieldValue("last_name"),first_name:this.GetFieldValue("first_name"),patronym:this.GetFieldValue("patronym")}},GetFieldValue:function(e){var s=n.Find(this.Fields,function(s){return s.Tag==e});return null!=s?s.GetValue():""},GetPerson:function(){for(var e={last_name:this.GetFieldValue("last_name"),first_name:this.GetFieldValue("first_name"),patronym:this.GetFieldValue("patronym"),full_name:""},s=0;s<this.Fields.length;s++)e.full_name.length&&this.Fields[s].GetValue().length&&(e.full_name+=" "),e.full_name+=this.Fields[s].GetValue();return e},Init:function(){for(var e=0;e<this.Options.fields.length;e++)this.Fields.push(function(e,s){var i={Options:n.BuildFieldOptions(s,e.Options,"site/suggest/person"),PersonForm:e,Tag:s.tag,EXT:{PrepareQuery:function(e){return $.extend(this.PersonForm.BuildQueryWithActiveField(this),{personlim:this.Options.limit})},IsAllowedToSuggestOnFocus:function(){return this.Options.suggest_on_focus},IsAllowedQuery:function(e,s){return 0<s.length},OnChooseSuggestion:function(e){this.Options.on_choose&&this.Options.on_choose.call(this.Options.on_choose_context,e),this.Options.on_fetch&&this.Options.on_fetch.call(this.Options.on_fetch_context,e,this.PersonForm.GetPerson())}},Init:function(){}};i.Init();var o=t(i.Options.id,i.Options.max_height,i.Options.z_index,i.Options.full_url,i.Options.empty_msg,i.Options.append_to,i.Options.on_edit,i.Options.on_edit_context);return n.ExtendSuggester(o,i)}(this,this.Options.fields[e]))},Dispose:function(){for(var e=0;e<this.Fields.length;e++)this.Fields[e].Dispose()}}).Init(),e}function t(e,s,t,o,u,l,r,d){return(e={EXT:{PrepareQuery:function(e){return{query:e}},ProcessedQueryForHighlight:function(e){return e},IsAllowedToSuggestOnFocus:function(){return!0},IsAllowedQuery:function(e,s){return e.query&&0<e.query.length&&0<s.length},OnEditField:function(e,s){r&&r.call(d,e,s)},OnChooseSuggestion:function(e){},SuggestionViewInList:function(e){return e.value},SuggestionViewInField:function(e){return e.value}},jField:n.GetField(e),SuggestionsClass:"u-AhunterSuggestions",SuggestionClass:"u-AhunterSuggestion",SuggestionSpecialClass:"u-AhunterSpecialSuggestion",SuggestionMainValueClass:"u-AhunterSuggestionMainValue",SuggestionSubValueClass:"u-AhunterSuggestionSubValue",SelectedSuggestionClass:"u-AhunterSelectedSuggestion",EmptySuggestionClass:"u-AhunterEmptySuggestion",jSuggestions:$("<div></div>"),jAppendTo:"string"==typeof l&&"#"!==l[0]&&"."!==l[0]?$("#"+l):$(l),Suggestions:[],SelectedIndex:-1,UserValue:"",ShownValue:"",IsHidden:!0,GetValue:function(){return this.jField.val()},SplitText:function(e,s){for(var t=/[\s\\\/,;.\-"'<>\[\]()*]/gi,i=0;i<e.length;){var n=t.exec(e);i<(n=null!==n?n.index:e.length)&&s(i,n),i=n+1}},FormatSuggestionValue:function(e){var s=this.EXT.ProcessedQueryForHighlight.call(this,this.UserValue),t=[];this.SplitText(s,function(e,i){t.push({word:s.substring(e,i).toLowerCase(),prefix:i==s.length})});var i="",o=0;return this.SplitText(e,function(s,u){i+=e.substring(o,s);var l=e.substring(s,u).toLowerCase(),r=n.Find(t,function(e,s){return e.word==l||e.prefix&&e.word==l.substring(0,e.word.length)});r?(i+="<strong>"+e.substring(s,s+r.word.length)+"</strong>",i+=e.substring(s+r.word.length,u)):i+=e.substring(s,u),o=u}),(i+=e.substring(o)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>"),i},ShowSuggestions:function(){var e=!0;if(this.UpdatePosition(),this.jSuggestions.empty(),this.Suggestions||(this.Suggestions=[]),0<this.Suggestions.length)for(var s=0;s<this.Suggestions.length;s++){var t=this.EXT.SuggestionViewInList(this.Suggestions[s]);"string"==typeof t&&(t={Lines:[t],Special:!1});var i=$("<div>");$("<div>"+this.FormatSuggestionValue(t.Lines[0])+"</div>").appendTo(i).addClass(this.SuggestionMainValueClass);for(var n=1;n<t.Lines.length;n++)$("<div>"+this.FormatSuggestionValue(t.Lines[n])+"</div>").appendTo(i).addClass(this.SuggestionSubValueClass);i.addClass(this.SuggestionClass),t.Special&&i.addClass(this.SuggestionSpecialClass),i.appendTo(this.jSuggestions)}else u?$("<div>"+u+"</div>").appendTo(this.jSuggestions).addClass(this.EmptySuggestionClass):e=!1;e?(this.jSuggestions.show(),this.IsHidden=!1,this.HighliteSuggestion(this.SelectedIndex)):this.ClearSuggestions()},HideSuggestions:function(){this.jSuggestions.hide(),this.IsHidden=!0},ClearSuggestions:function(){this.Suggestions=[],this.SelectedIndex=-1,this.jSuggestions.empty(),this.HideSuggestions()},UpdatePosition:function(){var e=this.jField.position(),s=this.jField.offsetParent().offset(),t=this.jAppendTo.offset(),i=e.left+(s.left-t.left),e=e.top+(s.top-t.top);this.jSuggestions.detach(),this.jSuggestions.appendTo(this.jAppendTo),this.jSuggestions.css("position","absolute"),this.jSuggestions.css("left",i),this.jSuggestions.css("top",e+this.jField.outerHeight()),this.jSuggestions.css("width",this.jField.outerWidth())},NavigateSuggestions:function(e){var s=!1;return e.which==i.Keys.ESC?(s=!0,this.ResetField(this.UserValue),this.HideSuggestions()):e.which==i.Keys.DOWN&&0<this.Suggestions.length?(s=!0,this.IsHidden?(this.ShowSuggestions(),this.SelectSuggestion(this.SelectedIndex)):this.SelectSuggestion(this.SelectedIndex+1)):e.which==i.Keys.UP&&0<this.Suggestions.length?(s=!0,this.IsHidden?(this.ShowSuggestions(),this.SelectSuggestion(this.SelectedIndex)):this.SelectSuggestion(this.SelectedIndex-1)):e.which==i.Keys.ENTER&&!this.IsHidden&&0<=this.SelectedIndex?(s=!0,this.SelectSuggestion(this.SelectedIndex),this.ResetField(this.ShownValue),this.EXT.OnChooseSuggestion.call(this,this.Suggestions[this.SelectedIndex]),this.ClearSuggestions()):e.which!=i.Keys.TAB||this.IsHidden||(0<=this.SelectedIndex?(this.SelectSuggestion(this.SelectedIndex),this.ResetField(this.ShownValue),this.EXT.OnChooseSuggestion.call(this,this.Suggestions[this.SelectedIndex])):this.ResetField(this.UserValue),this.ClearSuggestions()),!s},SelectSuggestion:function(e){this.SelectedIndex=-1>e?this.Suggestions.length-1:e>=this.Suggestions.length?-1:e,-1!=this.SelectedIndex?(this.ShownValue=this.EXT.SuggestionViewInField(this.Suggestions[this.SelectedIndex]),this.jField.val(this.ShownValue)):this.ResetField(this.UserValue),this.HighliteSuggestion(this.SelectedIndex)},ResetField:function(e){this.ShownValue=this.UserValue=e,this.jField.val(e)},HighliteSuggestion:function(e){this.jSuggestions.children().removeClass(this.SelectedSuggestionClass),-1!=e&&e<this.Suggestions.length&&(e=this.jSuggestions.children().get(e),$(e).addClass(this.SelectedSuggestionClass))},UpdateSuggestions:function(e){var s=this.jField.val(),t=!1;if(this.ShownValue!=s&&(t=!0,this.EXT.OnEditField(this.ShownValue,s)),t||e){var n=this;n.ResetField(s),n.SelectedIndex=-1,e=this.EXT.PrepareQuery.call(this,s),this.EXT.IsAllowedQuery.call(this,e,s)?(s=$.extend({output:"json",ahungest:i.Version},e),$.ajax({type:"GET",url:o,data:s,cache:!1,context:this,success:function(e){n.Suggestions=e.suggestions,n.ShowSuggestions()}})):n.ClearSuggestions()}},SetFocus:function(e){var s=this.EXT.IsAllowedToSuggestOnFocus;e&&(this.EXT.IsAllowedToSuggestOnFocus=function(){return!1}),this.jField.focus(),e&&(this.EXT.IsAllowedToSuggestOnFocus=s)},Init:function(){var e=this;this.ResetField(this.jField.val()),this.jSuggestions.addClass(this.SuggestionsClass),this.jSuggestions.css("max-height",s),this.jSuggestions.css("z-index",t),this.jSuggestions.hide(),this.UpdatePosition(),this.jField.attr("autocomplete","off"),this.jSuggestions.on("mouseover"+i.EventsNamespace,"."+this.SuggestionClass,function(){e.SelectedIndex=$(this).index(),e.HighliteSuggestion(e.SelectedIndex)}),this.jSuggestions.on("mouseout"+i.EventsNamespace,function(){e.SelectedIndex=-1,e.HighliteSuggestion(e.SelectedIndex)}),this.jSuggestions.on("mousedown"+i.EventsNamespace,"."+this.SuggestionClass,function(s){if(1==s.which)return e.SelectedIndex=$(this).index(),e.SelectSuggestion(e.SelectedIndex),e.ResetField(e.ShownValue),e.EXT.OnChooseSuggestion.call(e,e.Suggestions[e.SelectedIndex]),e.ClearSuggestions(),e.SetFocus(!0),!1}),this.jField.on("keydown"+i.EventsNamespace,function(s){return e.NavigateSuggestions(s)}),this.jField.on("keyup"+i.EventsNamespace,function(){e.UpdateSuggestions()}),this.jField.on("input"+i.EventsNamespace,function(){e.UpdateSuggestions()}),this.jField.on("change"+i.EventsNamespace,function(){e.UpdateSuggestions()}),this.jField.on("blur"+i.EventsNamespace,function(){e.IsHidden||(e.ResetField(e.UserValue),e.ClearSuggestions())}),this.jField.on("focus"+i.EventsNamespace,function(){e.EXT.IsAllowedToSuggestOnFocus.call(e)&&e.UpdateSuggestions(!0)}),$(window).on("resize"+i.EventsNamespace,function(){e.UpdatePosition()})},Dispose:function(){this.jSuggestions.off(i.EventsNamespace),this.jField.off(i.EventsNamespace),$(window).off(i.EventsNamespace),this.jSuggestions.remove()}}).Init(),e}window.AhunterSuggest={Address:{Discrete:function(s){var t={obj:null,deffered:!1};return $(document).ready(function(){t.obj=e(s)}),this.Running.push(t),t},Solid:function(e){var s={obj:null,deffered:!1};return $(document).ready(function(){s.obj=function(e){(e={Options:n.BuildFieldOptions(e,{},"site/suggest/address"),EXT:{PrepareQuery:function(e){e={query:e,addresslim:this.Options.limit};var s="";return this.Options.obsolete_names&&(s+="obsnames|"),this.Options.obsolete_objects&&(s+="obsobjects|"),0<s.length&&(e.mode=s),e},IsAllowedToSuggestOnFocus:function(){return this.Options.suggest_on_focus},OnChooseSuggestion:function(e){if(this.Options.on_choose&&this.Options.on_choose.call(this.Options.on_choose_context,e),this.Options.on_fetch){var s=$.extend({query:e.sign},this.Options.api_options);s.output=s.output?s.output+"|json":"json",this.Options.user&&(s.user=this.Options.user),$.ajax({type:"GET",url:this.Options.ahunter_url+"site/fetch/address",data:s,cache:!1,context:this,success:function(s){this.Options.on_fetch.call(this.Options.on_fetch_context,e,s.address)}})}},SuggestionViewInList:function(e){return n.AddressSuggestionViewInList(e)},SuggestionViewInField:function(e){var s=null,s=e.a_machine?n.DecodeMachineAddress(e.a_machine):e.f_machine?n.DecodeMachineAddress(e.f_machine):n.DecodeMachineAddress(e.machine);return n.AddressFieldsToString(s,!0)}},Init:function(){}}).Init();var s=t(e.Options.id,e.Options.max_height,e.Options.z_index,e.Options.full_url,e.Options.empty_msg,e.Options.append_to,e.Options.on_edit,e.Options.on_edit_context);return n.ExtendSuggester(s,e)}(e)}),this.Running.push(s),s},Running:[]},Person:{Discrete:function(e){var t={obj:null,deffered:!1};return $(document).ready(function(){t.obj=s(e)}),this.Running.push(t),t},Solid:function(e){var s={obj:null,deffered:!1};return $(document).ready(function(){s.obj=function(e){(e={Options:n.BuildFieldOptions(e,{},"site/suggest/person"),EXT:{PrepareQuery:function(e){return{query:e,personlim:this.Options.limit}},IsAllowedToSuggestOnFocus:function(){return this.Options.suggest_on_focus},OnChooseSuggestion:function(e){this.Options.on_choose&&this.Options.on_choose.call(this.Options.on_choose_context,e),this.Options.on_fetch&&this.Options.on_fetch.call(this.Options.on_fetch_context,e,{full_name:e.value})}},Init:function(){}}).Init();var s=t(e.Options.id,e.Options.max_height,e.Options.z_index,e.Options.full_url,e.Options.empty_msg,e.Options.append_to,e.Options.on_edit,e.Options.on_edit_context);return SolidSuggester=n.ExtendSuggester(s,e)}(e)}),this.Running.push(s),s},Running:[]},Company:{Discrete:function(e){var s={obj:null,deffered:!1};return $(document).ready(function(){s.obj=function(e){(e={Options:n.BuildFieldOptions(e,{},"site/suggest/company"),jAddressField:null,jPersonField:null,EXT:{PrepareQuery:function(e){var s="",t=i.CompanyFields.Name.sign;this.jAddressField?s+=i.CompanyFields.Address.sign+"["+this.jAddressField.val()+"]":t+=i.CompanyFields.Address.sign,this.jPersonField?s+=i.CompanyFields.Person.sign+"["+this.jPersonField.val()+"]":t+=i.CompanyFields.Person.sign;var n="discrete";return this.Options.egrul_enable&&(n+="|egrul"),this.Options.egrip_enable&&(n+="|egrip"),{query:s+(t+"[")+e+"]",mode:n,companylim:this.Options.limit,afilter:JSON.stringify(this.Options.filter)}},ProcessedQueryForHighlight:function(e){var s="";return this.jAddressField&&(s+=this.jAddressField.val()+" "),this.jPersonField&&(s+=this.jPersonField.val()+" "),s+e},IsAllowedToSuggestOnFocus:function(){return this.Options.suggest_on_focus},OnChooseSuggestion:function(e){if(this.Options.on_choose&&this.Options.on_choose.call(this.Options.on_choose_context,e),this.Options.on_fetch){var s=$.extend({query:e.sign},this.Options.api_options);s.output=s.output?s.output+"|json":"json",this.Options.user&&(s.user=this.Options.user),$.ajax({type:"GET",url:this.Options.ahunter_url+"site/fetch/company",data:s,cache:!1,context:this,success:function(s){this.Options.on_fetch.call(this.Options.on_fetch_context,e,s.company)}})}},SuggestionViewInList:function(e){return n.CompanySuggestionViewInList(e)},SuggestionViewInField:function(e){return e.name}},Init:function(){void 0!==this.Options.company_address_id&&(this.jAddressField=n.GetField(this.Options.company_address_id)),void 0!==this.Options.company_person_id&&(this.jPersonField=n.GetField(this.Options.company_person_id))}}).Init();var s=t(e.Options.id,e.Options.max_height,e.Options.z_index,e.Options.full_url,e.Options.empty_msg,e.Options.append_to,e.Options.on_edit,e.Options.on_edit_context);return DiscreteSuggester=n.ExtendSuggester(s,e)}(e)}),this.Running.push(s),s},Solid:function(e){var s={obj:null,deffered:!1};return $(document).ready(function(){s.obj=function(e){(e={Options:n.BuildFieldOptions(e,{},"site/suggest/company"),EXT:{PrepareQuery:function(e){return e={query:e,mode:"",companylim:this.Options.limit,afilter:JSON.stringify(this.Options.filter)},!this.Options.egrul_enable&&this.Options.egrip_enable||(e.mode="egrul"),this.Options.egrip_enable&&(e.mode+="|egrip"),e},IsAllowedToSuggestOnFocus:function(){return this.Options.suggest_on_focus},OnChooseSuggestion:function(e){if(this.Options.on_choose&&this.Options.on_choose.call(this.Options.on_choose_context,e),this.Options.on_fetch){var s=$.extend({query:e.sign},this.Options.api_options);s.output=s.output?s.output+"|json":"json",this.Options.user&&(s.user=this.Options.user),$.ajax({type:"GET",url:this.Options.ahunter_url+"site/fetch/company",data:s,cache:!1,context:this,success:function(s){this.Options.on_fetch.call(this.Options.on_fetch_context,e,s.company)}})}},SuggestionViewInList:function(e){return n.CompanySuggestionViewInList(e)},SuggestionViewInField:function(e){return e.name}},Init:function(){}}).Init();var s=t(e.Options.id,e.Options.max_height,e.Options.z_index,e.Options.full_url,e.Options.empty_msg,e.Options.append_to,e.Options.on_edit,e.Options.on_edit_context);return SolidSuggester=n.ExtendSuggester(s,e)}(e)}),this.Running.push(s),s},Running:[]},Dispose:function(e){this.FindAndDispose(e,this.Address.Running),this.FindAndDispose(e,this.Person.Running),this.FindAndDispose(e,this.Company.Running),this.DisposeDeffered(this.Address.Running),this.DisposeDeffered(this.Person.Running),this.DisposeDeffered(this.Company.Running)},FindAndDispose:function(e,s){var t=n.FindIndex(s,function(s){return e==s});-1!=t&&(s[t].obj?(s[t].obj.Dispose(),s.splice(t,1)):s[t].deffered=!0)},DisposeDeffered:function(e){for(var s=e.length-1;0<=s;s--)e[s].deffered&&e[s].obj&&(e[s].obj.Dispose(),e.splice(s,1))}};var i={Version:"3.1",EventsNamespace:".ahungest",AddressLevels:{Region:{name:"Region",sign:"r",num:0},District:{name:"District",sign:"d",num:1},City:{name:"City",sign:"c",num:2},Place:{name:"Place",sign:"p",num:3},Site:{name:"Site",sign:"t",num:4},Street:{name:"Street",sign:"s",num:5},House:{name:"House",sign:"h",num:6},Building:{name:"Building",sign:"b",num:7},Structure:{name:"Structure",sign:"u",num:8},Flat:{name:"Flat",sign:"f",num:9}},ZipLevel:{name:"Zip",sign:"z"},CompanyFields:{Name:{name:"Name",sign:"n",num:0},Address:{name:"Address",sign:"a",num:1},Person:{name:"Person",sign:"p",num:2}},Keys:{ESC:27,TAB:9,ENTER:13,UP:38,DOWN:40},DefaultOptions:{ahunter_url:"https://ahunter.ru/",empty_msg:"Нет подходящей подсказки",limit:10,suggest_on_empty:!1,suggest_on_focus:!0,obsolete_names:!1,obsolete_objects:!1,z_index:9999,max_height:500,append_to:null,id:void 0,on_edit:void 0,on_edit_context:void 0,on_choose:void 0,on_choose_context:void 0,on_fetch:void 0,on_fetch_context:void 0,user:void 0,api_options:void 0,filter:void 0,company_address_id:void 0,company_person_id:void 0,egrul_enable:!0,egrip_enable:!0}},n={GetField:function(e){return"string"==typeof e&&"#"!==e[0]&&"."!==e[0]?$("#"+e):$(e)},FindIndex:function(e,s){for(var t=-1,i=0;i<e.length;i++)if(s(e[i])){t=i;break}return t},Find:function(e,s){var t=null,i=this.FindIndex(e,s);return-1!=i&&(t=e[i]),t},IsLessLevel:function(e,s){return i.AddressLevels[e].num<i.AddressLevels[s].num},IsLessOrEqualLevel:function(e,s){return i.AddressLevels[e].num<=i.AddressLevels[s].num},IsNumericLevel:function(e){return i.AddressLevels[e].num>=i.AddressLevels.House.num},IsAddressLevel:function(e){return e in i.AddressLevels},FindAddressLevelBySign:function(e){var s="";for(Level in i.AddressLevels)if(i.AddressLevels[Level].sign==e){s=i.AddressLevels[Level].name;break}return s},GetLevelsSigns:function(e){for(var s="",t=0;t<e.length;t++)s+=i.AddressLevels[e[t]].sign;return s},EscapeQuery:function(e){return e.replace(/([\\\[\]])/g,"\\$1")},DecodeMachineAddress:function(e){for(var s=[],t=0,o="",u={name:"",type:"",level:i.AddressLevels.Region.name};t<e.length;){if("\\"!=e[t]&&":"!=e[t]){var l=n.FindAddressLevelBySign(e[t]);""===l?o+=e[t]:(u.name=o,s.push(u),o="",u={name:"",type:"",level:l},u.level=l)}else"\\"==e[t]?++t<e.length&&(o+=e[t]):":"==e[t]&&(u.type=o,o="");t++}return 0<o.length&&(u.name=o,s.push(u)),s},AddressFieldsDelta:function(e,s){for(var t=[],i=0,o=0;i<e.length&&o<s.length;)if(n.IsLessLevel(e[i].level,s[o].level))t.push(e[i]),i++;else{if(n.IsLessLevel(s[o].level,e[i].level)){0<i&&i--;break}e[i].type==s[o].type&&e[i].name==s[o].name||t.push(e[i]),i++,o++}for(;i<e.length;)t.push(e[i]),i++;return t},AddressFieldsToString:function(e,s){for(var t=!1,i="",o=0;o<e.length;o++)i.length&&(i+=", "),i+=e[o].type+" "+e[o].name,n.IsNumericLevel(e[o].level)&&(t=!0);return s&&!t&&(i+=", "),i},AddressSuggestionViewInList:function(e){var s=e.value;if(e.f_machine||e.a_machine){var t=n.DecodeMachineAddress(e.machine),i=null,o="";e.f_machine&&(i=n.DecodeMachineAddress(e.f_machine),o=n.AddressFieldsDelta(i,t),o=n.AddressFieldsToString(o));var u="";e.a_machine&&(e=n.DecodeMachineAddress(e.a_machine),t=n.AddressFieldsDelta(e,i||t),u=n.AddressFieldsToString(t)),(o||u)&&(s+=" (",o&&(s+=" → "+o),u&&(s+=" ⇒ "+u),s+=" )")}return s},CompanySuggestionViewInList:function(e){return{Lines:[e.name,e.address,e.ogrn+", ИНН: "+e.inn+(0<e.person.length?", "+e.person:"")],Special:0!=e.state}},ExtendSuggester:function(e,s){var t=e.EXT;return $.extend(e,s),e.EXT=$.extend(t,s.EXT),e},SelectDefined:function(){for(var e,s=0;s<arguments.length;s++)if(void 0!==arguments[s]){e=arguments[s];break}return e},BuildFieldOptions:function(e,s,t){var o={};for(Name in i.DefaultOptions)o[Name]=n.SelectDefined(e[Name],s[Name],i.DefaultOptions[Name]);return"/"!=o.ahunter_url[o.ahunter_url.length-1]&&(o.ahunter_url+="/"),o.append_to||(o.append_to=$(document.body)),o.full_url=o.ahunter_url+t,o}}}();